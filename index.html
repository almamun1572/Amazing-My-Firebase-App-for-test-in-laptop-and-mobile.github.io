
<!DOCTYPE html>
<html>
  <head>
    <title>Advanced Relay Control</title>
    <style>
     body {
  background: linear-gradient(135deg, #1e3c72, #2a5298, #6a11cb);
  font-family: 'Poppins', sans-serif;
  color: #ecf0f1;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  overflow: hidden;
  position: relative;
  perspective: 1200px;
  animation: gradientFlow 15s ease infinite;
}

@keyframes gradientFlow {
  0% {
    background: linear-gradient(135deg, #1e3c72, #2a5298, #6a11cb);
  }
  25% {
    background: linear-gradient(135deg, #2a5298, #6a11cb, #ff6f61);
  }
  50% {
    background: linear-gradient(135deg, #6a11cb, #ff6f61, #f39c12);
  }
  75% {
    background: linear-gradient(135deg, #ff6f61, #f39c12, #1e3c72);
  }
  100% {
    background: linear-gradient(135deg, #1e3c72, #2a5298, #6a11cb);
  }
}

body::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.1), rgba(0, 0, 0, 0));
  animation: pulseEffect 20s infinite;
  transform: rotate(0deg);
  pointer-events: none;
}

@keyframes pulseEffect {
  0%, 100% {
    transform: scale(1) rotate(0deg);
  }
  50% {
    transform: scale(1.5) rotate(180deg);
  }
}

body::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  background: linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(0, 0, 0, 0.2));
  mix-blend-mode: overlay;
  pointer-events: none;
}

    
.container {
  padding: 40px;
  max-width: 2000px;
  background: linear-gradient(145deg, #4b79a1, #283e51); /* সমৃদ্ধ রঙের গ্র্যাডিয়েন্ট */
  border-radius: 25px; /* আরও স্মুথ কোণ */
  box-shadow: 15px 15px 30px rgba(0, 0, 0, 0.5), -15px -15px 30px rgba(255, 255, 255, 0.1), inset -5px -5px 10px rgba(255, 255, 255, 0.05), inset 5px 5px 15px rgba(0, 0, 0, 0.2); /* বহিরাগত ও অভ্যন্তরীণ ছায়া */
  text-align: center;
  border: 2px solid rgba(255, 255, 255, 0.3); /* একটি পাতলা আধা-স্বচ্ছ বর্ডার */
  position: relative;
  overflow: hidden; /* অভ্যন্তরের উপাদান সীমাবদ্ধ করার জন্য */
  transform-style: preserve-3d; /* থ্রিডি পজিশনিং সক্ষম */
  transition: all 0.4s ease-in-out; /* স্মুথ ট্রানজিশন */
}

.container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.05), rgba(0, 0, 0, 0.3));
  z-index: 1;
  pointer-events: none;
  transform: rotate(45deg);
}

.container:hover {
  transform: translateY(-10px) scale(1.02);
  box-shadow: 20px 20px 40px rgba(0, 0, 0, 0.6), -20px -20px 40px rgba(255, 255, 255, 0.15);
}

.container:hover::before {
  background: radial-gradient(circle, rgba(255, 255, 255, 0.1), rgba(0, 0, 0, 0.4));
}

.container::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 120%;
  height: 120%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.05), transparent);
  transform: translate(-50%, -50%) scale(1.5);
  z-index: -1;
  pointer-events: none;
  filter: blur(10px);
}
h1 {
  font-size: 3em; /* বড় ফন্ট সাইজ */
  font-weight: 700; /* বোল্ড টেক্সট */
  letter-spacing: 2px; /* অক্ষরের মধ্যে ফাঁকা */
  margin-bottom: 25px; /* নিচে ফাঁকা */
  color: #f1c40f; /* প্রাথমিক রঙ */
  background: linear-gradient(45deg, #f1c40f, #e67e22); /* গ্রেডিয়েন্ট ব্যাকগ্রাউন্ড */
  -webkit-background-clip: text; /* ব্যাকগ্রাউন্ড ক্লিপ */
  -webkit-text-fill-color: transparent; /* টেক্সট ফিল ট্রান্সপারেন্ট */
  text-shadow: 
    1px 1px 2px rgba(0, 0, 0, 0.4), /* শ্যাডোর প্রথম স্তর */
    2px 2px 5px rgba(0, 0, 0, 0.3), /* শ্যাডোর দ্বিতীয় স্তর */
    0 0 15px rgba(241, 196, 15, 0.6), /* গ্লো ইফেক্ট */
    0 0 20px rgba(241, 196, 15, 0.8); /* আরও গ্লো */
  transform: perspective(500px) rotateX(10deg) rotateY(-5deg); /* ৩ডি ইফেক্ট */
  text-align: center; /* টেক্সট সেন্টার করে */
}

    
      .relay {
  margin-bottom: 30px;
  background: linear-gradient(145deg, #4a4f59, #1f2229); /* সমৃদ্ধ এবং কনট্রাস্টেড কালার টোন */
  padding: 25px;
  border-radius: 20px; /* আরও গোলাকার কোণ */
  box-shadow: 15px 15px 30px rgba(0, 0, 0, 0.5), -15px -15px 30px rgba(255, 255, 255, 0.1), inset -5px -5px 10px rgba(255, 255, 255, 0.05), inset 5px 5px 15px rgba(0, 0, 0, 0.2); /* গভীর থ্রিডি ছায়া */
  border: 2px solid rgba(255, 255, 255, 0.2); /* একটি আধা-স্বচ্ছ বর্ডার */
  position: relative;
  overflow: hidden;
  transition: all 0.4s ease-in-out; /* স্মুথ ট্রানজিশন */
}

.relay:hover {
  transform: translateY(-10px) scale(1.03); /* হোভার করলে সামান্য উপরে ওঠার অনুভূতি */
  box-shadow: 20px 20px 40px rgba(0, 0, 0, 0.6), -20px -20px 40px rgba(255, 255, 255, 0.2); /* উন্নত হোভার ছায়া */
}

.relay::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.03), rgba(0, 0, 0, 0.2)); /* সূক্ষ্ম ওভারলে */
  z-index: 1;
  pointer-events: none;
  transform: rotate(45deg);
}

.relay::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 120%;
  height: 120%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.04), transparent);
  transform: translate(-50%, -50%) scale(1.5);
  z-index: -1;
  pointer-events: none;
  filter: blur(12px);
}

.relay-header {
  font-size: 2.2em; /* বড় এবং স্পষ্ট ফন্ট সাইজ */
  font-weight: 700; /* গাঢ় টেক্সট */
  margin-bottom: 20px;
  text-transform: uppercase;
  color: #f39c12; /* উজ্জ্বল রঙ */
  background: linear-gradient(145deg, #f1c40f, #e67e22); /* গ্র্যাডিয়েন্ট প্রভাব */
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent; /* শুধুমাত্র গ্র্যাডিয়েন্ট প্রভাব প্রদর্শন */
  text-shadow: 4px 4px 6px rgba(0, 0, 0, 0.5), -4px -4px 6px rgba(255, 255, 255, 0.1); /* উন্নত থ্রিডি লুক */
  position: relative;
  letter-spacing: 2px; /* ফাঁকা স্পেস যোগ করা হয়েছে */
  transition: transform 0.3s ease-in-out, text-shadow 0.3s ease-in-out; /* স্মুথ অ্যানিমেশন */
}

.relay-header:hover {
  transform: scale(1.1); /* হালকা বড় হওয়া */
  text-shadow: 6px 6px 10px rgba(0, 0, 0, 0.7), -6px -6px 10px rgba(255, 255, 255, 0.2); /* আরও গভীর হোভার প্রভাব */
}

    
      .relay button {
        width: 120px;
        height: 120px;
        margin: 10px;
        font-size: 1.4em;
        font-weight: bold;
        border: none;
        border-radius: 50%;
        background: linear-gradient(145deg, #3498db, #2980b9);
        color: #ecf0f1;
        cursor: pointer;
        transition: all 0.4s ease;
        box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.4), -10px -10px 20px rgba(255, 255, 255, 0.1);
      }
    
      .relay button:hover {
        transform: translateY(-5px) scale(1.1);
        box-shadow: 15px 15px 25px rgba(0, 0, 0, 0.5), -15px -15px 25px rgba(255, 255, 255, 0.2);
      }
    
      .relay button:active {
        transform: scale(0.95);
        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3), -5px -5px 10px rgba(255, 255, 255, 0.1);
      }
    
      .relay button.on {
        background: linear-gradient(145deg, #27ae60, #2ecc71);
        box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.4), -10px -10px 20px rgba(255, 255, 255, 0.1);
      }
    
      .relay button.off {
        background: linear-gradient(145deg, #c0392b, #e74c3c);
        box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.4), -10px -10px 20px rgba(255, 255, 255, 0.1);
      }
    
      .relay button.set {
        background: linear-gradient(145deg, #8e44ad, #9b59b6);
      }
    
      .relay button.alarm-set {
        background: linear-gradient(145deg, #f39c12, #f1c40f);
      }
    
      .relay button.timer-set {
        background: linear-gradient(145deg, #e67e22, #d35400);
      }
    
      #clock-container {
  display: flex; /* ক্লকটি সেন্টারে রাখার জন্য */
  justify-content: center; /* অনুভূমিকভাবে সেন্টার */
  align-items: center; /* উলম্বভাবে সেন্টার */
  background: linear-gradient(145deg, #34495e, #2c3e50); /* ডার্ক গ্রেডিয়েন্ট */
  border-radius: 20px; /* গোলাকার কোণা */
  padding: 20px; /* ভেতরের ফাঁকা */
  margin: 20px auto; /* সেন্টারে পজিশন */
  max-width: 400px; /* সর্বোচ্চ প্রস্থ */
  box-shadow: 
    10px 10px 20px rgba(0, 0, 0, 0.4), 
    -10px -10px 20px rgba(255, 255, 255, 0.1); /* নেয়ুমরফিক শ্যাডো */
  transform: perspective(1000px) rotateX(10deg); /* ৩ডি ইফেক্ট */
  animation: float 3s ease-in-out infinite; /* ফ্লোটিং অ্যানিমেশন */
}

@keyframes float {
  0%, 100% {
    transform: perspective(1000px) rotateX(10deg) translateY(0); /* মূল অবস্থান */
  }
  50% {
    transform: perspective(1000px) rotateX(10deg) translateY(-10px); /* উপরে ওঠা */
  }
}

#clock {
  font-size: 3em; /* বড় ফন্ট সাইজ */
  font-weight: bold; /* বোল্ড টেক্সট */
  color: #f1c40f; /* উজ্জ্বল হলুদ রঙ */
  text-shadow: 
    0px 4px 8px rgba(0, 0, 0, 0.4), 
    0px 0px 10px #f1c40f; /* গ্লো এবং শ্যাডো */
  letter-spacing: 2px; /* অক্ষরের মধ্যে ফাঁকা */
  animation: glow 1.5s ease-in-out infinite; /* গ্লো অ্যানিমেশন */
}

@keyframes glow {
  0%, 100% {
    text-shadow: 
      0px 4px 8px rgba(0, 0, 0, 0.4), 
      0px 0px 10px #f1c40f; /* প্রাথমিক গ্লো */
  }
  50% {
    text-shadow: 
      0px 4px 8px rgba(0, 0, 0, 0.4), 
      0px 0px 20px #f39c12; /* পরিবর্তনশীল গ্লো */
  }
}


      

  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
  }

  .modal-content {
    background: linear-gradient(145deg, #ffffff, #dfe6e9);
    color: #2c3e50;
    margin: 10% auto;
    padding: 25px;
    border: none;
    width: 90%;
    max-width: 450px;
    border-radius: 15px;
    box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.4), -10px -10px 20px rgba(255, 255, 255, 0.2);
    transform: scale(0.9);
    animation: zoomIn 0.3s ease forwards;
  }

  @keyframes zoomIn {
    to {
      transform: scale(1);
    }
  }

  .picker {
    display: flex;
    justify-content: center;
    margin-top: 15px;
  }

  .picker select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border: 1px solid #2c3e50;
    background: #2c3e50;
    color: #ecf0f1;
    padding: 12px;
    font-size: 1.2em;
    margin: 10px;
    border-radius: 10px;
    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }




  .picker select:hover {
    transform: translateY(-2px);
    box-shadow: inset 4px 4px 10px rgba(0, 0, 0, 0.4), inset -4px -4px 10px rgba(255, 255, 255, 0.2);
  }

  .modal-footer {
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
  }

  .modal-footer button {
    width: 48%;
    padding: 12px;
    font-size: 1.2em;
    background: linear-gradient(145deg, #3498db, #2980b9);
    color: #ecf0f1;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3), -5px -5px 10px rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }

  .modal-footer button:hover {
    transform: translateY(-3px);
    box-shadow: 8px 8px 15px rgba(0, 0, 0, 0.4), -8px -8px 15px rgba(255, 255, 255, 0.2);
  }

  .modal-footer button.cancel {
    background: linear-gradient(145deg, #e74c3c, #c0392b);
  }

  .modal-footer button:active {
    transform: scale(0.95);
    box-shadow: inset 3px 3px 7px rgba(0, 0, 0, 0.4), inset -3px -3px 7px rgba(255, 255, 255, 0.1);
  }



  /* ডেস্কটপ এবং বড় স্ক্রিনের জন্য */
@media (min-width: 1024px) {
  .container {
    max-width: 800px;
    padding: 50px;
    font-size: 1.2rem;
  }

  h1 {
    font-size: 3em;
  }

  .relay button {
    width: 120px;
    height: 120px;
    font-size: 1.4em;
  }
}

/* ট্যাবলেট ডিভাইসের জন্য */
@media (max-width: 1023px) and (min-width: 768px) {
  .container {
    max-width: 90%;
    padding: 30px;
    font-size: 1rem;
  }

  h1 {
    font-size: 2.5em;
  }

  .relay button {
    width: 100px;
    height: 100px;
    font-size: 1.2em;
  }
}

/* মোবাইল ডিভাইসের জন্য */
@media (max-width: 767px) {
  .container {
    max-width: 90%;
    padding: 20px;
    font-size: 0.9rem;
  }

  h1 {
    font-size: 2em;
    margin-bottom: 20px;
  }

  .relay {
    margin-bottom: 20px;
  }

  .relay button {
    width: 80px;
    height: 80px;
    font-size: 1em;
  }

  #clock-container {
    padding: 15px;
    font-size: 2em;
  }
}

/* ছোট স্ক্রিনের জন্য অতিরিক্ত ফাইন টিউন */
@media (max-width: 480px) {
  h1 {
    font-size: 1.8em;
  }

  .relay button {
    width: 70px;
    height: 70px;
    font-size: 0.9em;
  }

  .modal-content {
    padding: 15px;
    max-width: 90%;
  }
}

      
    </style>
    
  </head>
  
  <body>
    
    <div class='container'>
      <h1>Control Smart Plug</h1>
      <div id="clock-container">
        <div id="clock"></div>
      </div>
      
    <div class='relay'>
      <div class='relay-header'>Relay 1</div>
      <button id='relay0' class='on' onclick='toggleRelay(0)'><i class='fas fa-lightbulb'></i></button>
      <button id='alarmBtn0' class='alarm-set' onclick='openAlarmModal(0)'><i class='fas fa-alarm-clock'></i></button>
      <button id='timerBtn0' class='timer-set' onclick='openTimerModal(0)'><i class='fas fa-hourglass-half'></i></button>
    </div>
    <div class='relay'>
      <div class='relay-header'>Relay 2</div>
      <button id='relay1' class='off' onclick='toggleRelay(1)'><i class='fas fa-lightbulb'></i></button>
      <button id='alarmBtn1' class='alarm-set' onclick='openAlarmModal(1)'><i class='fas fa-alarm-clock'></i></button>
      <button id='timerBtn1' class='timer-set' onclick='openTimerModal(1)'><i class='fas fa-hourglass-half'></i></button>
    </div>
    <div class='relay'>
      <div class='relay-header'>Relay 3</div>
      <button id='relay2' class='off' onclick='toggleRelay(2)'><i class='fas fa-lightbulb'></i></button>
      <button id='alarmBtn2' class='alarm-set' onclick='openAlarmModal(2)'><i class='fas fa-alarm-clock'></i></button>
      <button id='timerBtn2' class='timer-set' onclick='openTimerModal(2)'><i class='fas fa-hourglass-half'></i></button>
    </div>
    <div class='relay'>
      <div class='relay-header'>Relay 4</div>
      <button id='relay3' class='on' onclick='toggleRelay(3)'><i class='fas fa-lightbulb'></i></button>
      <button id='alarmBtn3' class='alarm-set' onclick='openAlarmModal(3)'><i class='fas fa-alarm-clock'></i></button>
      <button id='timerBtn3' class='timer-set' onclick='openTimerModal(3)'><i class='fas fa-hourglass-half'></i></button>
    </div>
    </div>
    
    <div id='alarmModal' class='modal'>
      <div class='modal-content'>
          <h2>Set Alarm</h2>
          <div class='picker'>
              <select id='alarmHour'></select>
              <select id='alarmMinute'></select>
              <select id='alarmSecond'></select>
              <select id='alarmPeriod'>
                  <option value='AM'>AM</option>
                  <option value='PM'>PM</option>
              </select>
          </div>
          <div class='modal-footer'>
              <button onclick='setAlarm()'>Set</button>
              <button class='cancel' onclick='closeModal()'>Cancel</button>
          </div>
      </div>
  </div>

    <div id='timerModal' class='modal'>
      <div class='modal-content'>
        <h2>Set Timer</h2>
        <div class='picker'>
          <select id='timerDuration'>
            <option value='5'>5 Seconds</option>
            <option value='10'>10 Seconds</option>
            <option value='15'>15 Seconds</option>
            <option value='30'>30 Seconds</option>
            <option value='60'>1 Minute</option>
            <option value='120'>2 Minute</option>
            <option value='180'>3 Minute</option>
            <option value='240'>4 Minute</option>
            <option value='300'>5 Minutes</option>
            <option value='600'>10 Minutes</option>
            <option value='900'>15 Minutes</option>
            <option value='1020'>17 Minutes</option>
            <option value='1200'>20 Minutes</option>
            <option value='1800'>30 Minutes</option>
            <option value='2700'>45 Minutes</option>
            <option value='3600'>60 Minutes</option>
            <option value='5400'>90 Minutes</option>
            <option value='7200'>120 Minutes</option>
          </select>
        </div>
        <div class='modal-footer'>
          <button onclick='setTimer()'>Set</button>
          <button class='cancel' onclick='closeModal()'>Cancel</button>
        </div>
      </div>
    </div>
    
    <script>
      



// Dropdown options dynamically populate করার জন্য ফাংশন
function populateDropdown(selectId, start, end, pad = false) {
        const select = document.getElementById(selectId);
        for (let i = start; i <= end; i++) {
            const option = document.createElement('option');
            option.value = pad ? String(i).padStart(2, '0') : i;
            option.textContent = pad ? String(i).padStart(2, '0') : i;
            select.appendChild(option);
        }
    }

    // ঘন্টা, মিনিট, সেকেন্ড এর ড্রপডাউন ফিল করতে কল করুন
    populateDropdown('alarmHour', 1, 12); // Hour: 1 to 12
    populateDropdown('alarmMinute', 0, 59, true); // Minute: 00 to 59
    populateDropdown('alarmSecond', 0, 59, true); // Second: 00 to 59




     // Firebase database URL এবং Secret Token
const databaseURL = "https://control-my-fan-light-default-rtdb.firebaseio.com/";
const databaseSecret = "LXaibJJnXsDda3zRS1dxeh7kuxjnO0mtTkHKM6gj";


// রিলে বাটনের রঙ আপডেট করার ফাংশন
function updateButtonColor(relayIndex, state) {
    const button = document.getElementById(`relay${relayIndex}`);
    if (state === "on") {
        button.classList.remove("off");
        button.classList.add("on");
        button.style.backgroundColor = "green"; // সবুজ রঙ
        button.style.color = "white";
    } else if (state === "off") {
        button.classList.remove("on");
        button.classList.add("off");
        button.style.backgroundColor = "red"; // লাল রঙ
        button.style.color = "white";
    }
}

// Firebase থেকে রিলে স্টেট রিড এবং আপডেট করা
function fetchRelayStates() {
    const relayPath = `firebase25july.json?auth=${databaseSecret}`;
    var xhrGet = new XMLHttpRequest();
    xhrGet.open("GET", databaseURL + relayPath, true);

    xhrGet.onload = function () {
        if (xhrGet.status === 200) {
            const relays = JSON.parse(xhrGet.responseText);
            Object.keys(relays).forEach((key, index) => {
                const state = relays[key];
                updateButtonColor(index, state);
            });
        } else {
            console.error("Failed to fetch relay states.");
        }
    };

    xhrGet.send();
}

// রিলে টগল করার পর বাটনের রঙ আপডেট করা
function toggleRelay(relayIndex) {
    const relayKey = `relay${relayIndex + 1}`;
    const relayPath = `firebase25july/${relayKey}.json?auth=${databaseSecret}`;

    var xhrGet = new XMLHttpRequest();
    xhrGet.open("GET", databaseURL + relayPath, true);

    xhrGet.onload = function () {
        if (xhrGet.status === 200) {
            var currentState = JSON.parse(xhrGet.responseText);
            var newState = currentState === "on" ? "off" : "on";

            // ডেটা PUT রিকোয়েস্ট
            var xhrPut = new XMLHttpRequest();
            xhrPut.open("PUT", databaseURL + relayPath, true);
            xhrPut.setRequestHeader("Content-Type", "application/json");
            xhrPut.send(JSON.stringify(newState));

            xhrPut.onload = function () {
                if (xhrPut.status === 200) {
                    console.log(`Relay ${relayKey} updated to: ${newState}`);
                    updateButtonColor(relayIndex, newState); // নতুন স্টেট অনুযায়ী বাটন আপডেট
                } else {
                    console.error(`Failed to update relay ${relayKey}.`);
                }
            };
        } else {
            console.error(`Failed to fetch current state for relay ${relayKey}.`);
        }
    };

    xhrGet.send();
}

// প্রতি নির্দিষ্ট সময় পর পর রিলে স্টেট আপডেট চেক করা (optional)
setInterval(fetchRelayStates, 5000); // প্রতি ৫ সেকেন্ড পর স্টেট চেক
fetchRelayStates(); // পেজ লোডের সময় রিলে স্টেট চেক


function setAlarm() {
    // ইউজারের পছন্দ করা সময় সংগ্রহ করা
    var hour = parseInt(document.getElementById('alarmHour').value);
    var minute = parseInt(document.getElementById('alarmMinute').value);
    var second = parseInt(document.getElementById('alarmSecond').value);
    var period = document.getElementById('alarmPeriod').value;

    // সিলেক্টেড রিলে আইডি
    var relayElement = document.getElementById('relay' + alarmModalRelay);

    if (!relayElement) {
        console.error("Relay element not found for alarmModalRelay:", alarmModalRelay);
        alert("Relay element not found! Please try again.");
        return;
    }

    var relayIndex = parseInt(alarmModalRelay); // relayIndex নির্ধারণ করা

    // AM/PM অনুযায়ী সময় ২৪ ঘন্টায় রূপান্তর
    if (period === 'PM' && hour < 12) {
        hour += 12;
    }
    if (period === 'AM' && hour === 12) {
        hour = 0;
    }

    // বর্তমান সময় এবং এলার্ম সময় তুলনা করা
    var now = new Date();
    var alarmTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hour, minute, second);

    // যদি এলার্ম সময় অতীত হয়, এটি পরবর্তী দিনের জন্য সেট করা
    if (alarmTime <= now) {
        alarmTime.setDate(alarmTime.getDate() + 1);
    }

    // এলার্ম সময় পর্যন্ত কত সময় বাকি আছে (মিলিসেকেন্ডে)
    var timeToAlarm = alarmTime - now;

    console.log(`Alarm set for Relay ${relayIndex + 1} at ${alarmTime}.`);

    // নির্ধারিত সময় পরে রিলে স্টেট পরিবর্তন করা
    setTimeout(function () {
        console.log(`Alarm triggered for Relay ${relayIndex + 1}.`);
        toggleRelay(relayIndex); // relayIndex দিয়ে toggleRelay কল করা
       
    }, timeToAlarm);

    alert(`Alarm set for Relay ${relayIndex + 1} at ${hour % 12 || 12}:${minute.toString().padStart(2, '0')}:${second.toString().padStart(2, '0')} ${period}.`);
    closeModal(); // মডাল বন্ধ করা
}

function setTimer() {
    // `timerDuration` সিলেক্ট থেকে ডিউরেশন সংগ্রহ করা (সেকেন্ডে)
    var duration = parseInt(document.getElementById('timerDuration').value); // ডিউরেশন সেকেন্ডে
    
    // টার্গেট রিলে বোতামের ID পাওয়া
    var relayElement = document.getElementById('relay' + timerModalRelay);

    // relayElement চেক করা
    if (!relayElement) {
        console.error("Relay element not found for timerModalRelay:", timerModalRelay);
        alert("Relay element not found! Please try again.");
        return;
    }

    // relayIndex নির্ধারণ করা
    var relayIndex = parseInt(timerModalRelay); // relay0, relay1 থেকে ইনডেক্স বের করা

    // ডিউরেশন ভ্যালিড চেক করা
    if (isNaN(duration) || duration <= 0) {
        alert("Please select a valid duration!");
        return;
    }

    console.log(`Setting timer for Relay ${relayIndex + 1} for ${duration} seconds.`);

    // নির্ধারিত সময় শেষে রিলে স্টেট পরিবর্তন করা
    setTimeout(function () {
        console.log(`Timer ended. Toggling Relay ${relayIndex + 1}.`);
        toggleRelay(relayIndex); // relayIndex দিয়ে toggleRelay কল করা
    }, duration * 1000); // টাইমার সেকেন্ড থেকে মিলিসেকেন্ডে রূপান্তর

    alert(`Timer set for Relay ${relayIndex + 1} for ${duration} seconds.`);
    closeModal(); // মডাল বন্ধ করা
}




      
function closeModal() { 
  document.getElementById('alarmModal').style.display = 'none'; 
  document.getElementById('timerModal').style.display = 'none'; 
}

function openAlarmModal(relay) { 
  alarmModalRelay = relay; 
  document.getElementById('alarmModal').style.display = 'block'; 
}


      
function openTimerModal(relay) {
  timerModalRelay = relay; 
  document.getElementById('timerModal').style.display = 'block'; 
}

      
function updateClock() { 
  var now = new Date(); 
  var h = now.getHours(); 
  var m = now.getMinutes(); 
  var s = now.getSeconds(); 
  var ampm = h >= 12 ? 'PM' : 'AM'; 
  h = h % 12; 
  h = h ? h : 12; 
  m = m < 10 ? '0' + m : m; 
  s = s < 10 ? '0' + s : s; 
  document.getElementById('clock').innerHTML = h + ':' + m + ':' + s + ' ' + ampm; 
}
setInterval(updateClock, 1000); 
updateClock();

    
    </script>
  </body>
</html>